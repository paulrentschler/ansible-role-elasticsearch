#
# {{ ansible_managed }}
#
# This file was generated by Ansible for {{ ansible_fqdn }}
# Do NOT modify this file by hand!
#


# ======================== Elasticsearch Configuration =========================
#
# NOTE: Elasticsearch comes with reasonable defaults for most settings.
#       Before you set out to tweak and tune the configuration, make sure you
#       understand what are you trying to accomplish and the consequences.

# The primary way of configuring a node is via this file. This template lists
# the most important settings you may want to configure for a production cluster.

# Please consult the documentation for further information on configuration options:
# https://www.elastic.co/guide/en/elasticsearch/reference/index.html


# ---------------------------------- Cluster -----------------------------------
#
# Use a descriptive name for your cluster:

cluster.name: {{ elasticsearch_cluster_name }}


# ------------------------------------ Node ------------------------------------
#
# Use a descriptive name for the node:
#
node.name: {{ elasticsearch_node.name }}

# Every node can be configured to allow or deny being eligible as the primary,
# and to allow or deny to store the data.
#
# Allow this node to be eligible as a primary node:
#
node.master: {% if elasticsearch_node.primary|bool %}true{% else %}false{% endif %}

# Allow this node to store data (enabled by default):
#
node.data: {% if elasticsearch_node.data|bool %}true{% else %}false{% endif %}

# Use the Cluster Health API [http://localhost:9200/_cluster/health], the
# Node Info API [http://localhost:9200/_cluster/nodes] or GUI tools
# such as <http://www.elasticsearch.org/overview/marvel/>,
# <http://github.com/karmi/elasticsearch-paramedic>,
# <http://github.com/lukas-vlcek/bigdesk> and
# <http://mobz.github.com/elasticsearch-head> to inspect the cluster state.

# Add custom attributes to the node:
#
#node.attr.rack: r1

# By default, multiple nodes are allowed to start from the same installation location
# to disable it, set the following:
#
# node.max_local_storage_nodes: 1


# ----------------------------------- Index ------------------------------------
#
# Set the number of shards (splits) of an index (5 by default):
#
index.number_of_shards: {{ elasticsearch_index.shards }}

# Set the number of replicas (additional copies) of an index (1 by default):
#
index.number_of_replicas: {{ elasticsearch_index.replicas }}


# ----------------------------------- Paths ------------------------------------
#
# Path to directory containing configuration (this file and logging.yml):
#
#path.conf: /etc/elasticsearch

# Path to directory where to store the data (separate multiple locations by comma):
#
path.data: /var/lib/elasticsearch

# Path to temporary files:
#
#path.work: /tmp/elasticsearch

# Path to log files:
#
path.logs: /var/log/elasticsearch

# Path to where plugins are installed:
#
#path.plugins: /usr/share/elasticsearch/plugins


# ----------------------------------- Plugin -----------------------------------
#
# If a plugin listed here is not installed for current node, the node will not start.
{% if elasticsearch_node.mandatory_plugins != "" %}
plugin.mandatory: {{ elasticsearch_node.mandatory_plugins }}
{% endif %}


# ----------------------------------- Memory -----------------------------------
#
# Lock the memory on startup:
#
bootstrap.memory_lock: {% if elasticsearch_mlockall|bool %}true{% else %}false{% endif %}

# Make sure that the heap size is set to about half the memory available
# on the system and that the owner of the process is allowed to use this
# limit.

# Elasticsearch performs poorly when the system is swapping the memory.


# ---------------------------------- Network -----------------------------------
#
# By default Elasticsearch is only accessible on localhost. Set a different
# address here to expose this node on the network:
#
network.host: {{ elasticsearch_network.host }}

# Set the host to bind to for HTTP traffic:
#
http.host: {{ elasticsearch_network.http_host }}

# By default Elasticsearch listens for HTTP traffic on the first free port it
# finds starting at 9200. Set a specific HTTP port here:
#
#http.port: 9200

# For more information, consult the network module documentation.


# --------------------------------- Discovery ----------------------------------
#
# Disable discovery
discovery.type: single-node

# Pass an initial list of hosts to perform discovery when this node is started:
# The default list of hosts is ["127.0.0.1", "[::1]"]
#
#discovery.seed_hosts: ["host1", "host2"]
#
# Bootstrap the cluster using an initial set of master-eligible nodes:
#
#cluster.initial_master_nodes: ["node-1", "node-2"]
#
# For more information, consult the discovery and cluster formation module documentation.


# ---------------------------------- Various -----------------------------------
#
# Require explicit names when deleting indices:
#
#action.destructive_requires_name: true


# ---------------------------------- Security ----------------------------------
#
#                                 *** WARNING ***
#
# Elasticsearch security features are not enabled by default.
# These features are free, but require configuration changes to enable them.
# This means that users donâ€™t have to provide credentials and can get full access
# to the cluster. Network connections are also not encrypted.
#
# To protect your data, we strongly encourage you to enable the Elasticsearch security features.
# Refer to the following documentation for instructions.
#
# https://www.elastic.co/guide/en/elasticsearch/reference/7.16/configuring-stack-security.html

# enable security
#
xpack.security.enabled: true

# Dynamic scripts are bad and just asking to be abused by "bad people"
#
script.disable_dynamic: true

# This prevents certain bulk commands from being able to specify the index
# in the command body instead of as part of the URL where it's easier to filter
#
rest.action.multi.allow_explicit_index: true

# Prevent indices from being deleted
#
#action.disable_delete_all_indices: true

